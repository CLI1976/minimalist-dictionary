# æ¥µç°¡å­—å…¸ - æŠ€è¡“æ¶æ§‹èªªæ˜

## ğŸ“‚ å°ˆæ¡ˆçµæ§‹

```
minimalist-dictionary/
â”‚
â”œâ”€â”€ index.html          # å‰ç«¯ï¼šç¶²é çµæ§‹
â”œâ”€â”€ style.css           # å‰ç«¯ï¼šè¦–è¦ºè¨­è¨ˆ
â”œâ”€â”€ app.js              # å‰ç«¯ï¼šäº’å‹•é‚è¼¯ï¼ˆå«é›™é‡å‚™æ´ç™¼éŸ³ï¼‰
â”‚
â””â”€â”€ backend/
    â”œâ”€â”€ server.py       # å¾Œç«¯ï¼šAPI æœå‹™å™¨ï¼ˆç¿»è­¯ + éŸ³æª”ï¼‰
    â”œâ”€â”€ requirements.txt # å¾Œç«¯ï¼šPython ä¾è³´
    â””â”€â”€ README.md       # å¾Œç«¯ï¼šä½¿ç”¨èªªæ˜
```

## ğŸ—ï¸ å®Œæ•´æ¶æ§‹åœ–ï¼ˆå«éŸ³æª”ç³»çµ±ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç€è¦½å™¨                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  å‰ç«¯ Web App                                             â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚     â”‚
â”‚  â”‚  â”‚index.htmlâ”‚  â”‚ style.cssâ”‚  â”‚  app.js  â”‚               â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚     â”‚
â”‚  â”‚       â”‚              â”‚         â”‚                          â”‚     â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚     â”‚
â”‚  â”‚                      â”‚                                    â”‚     â”‚
â”‚  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚     â”‚
â”‚  â”‚           â–¼                     â–¼                         â”‚     â”‚
â”‚  â”‚    fetch ç¿»è­¯ API          é»æ“Šç™¼éŸ³æŒ‰éˆ•                    â”‚     â”‚
â”‚  â”‚           â”‚                     â”‚                         â”‚     â”‚
â”‚  â”‚           â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                  â”‚     â”‚
â”‚  â”‚           â”‚              â–¼             â–¼                  â”‚     â”‚
â”‚  â”‚           â”‚      æœ‰éŸ³æª”URLï¼Ÿ     ç„¡éŸ³æª”URL                 â”‚     â”‚
â”‚  â”‚           â”‚              â”‚             â”‚                  â”‚     â”‚
â”‚  â”‚           â”‚              â–¼             â–¼                  â”‚     â”‚
â”‚  â”‚           â”‚      æ’­æ”¾çœŸå¯¦éŸ³æª”    Web Speech API            â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼ HTTP GET (localhost:5000/api/translate?word=hello)
                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Python å¾Œç«¯æœå‹™å™¨ (Flask)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  server.py - translate()                                â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚     â”‚
â”‚  â”‚  â”‚  1. fetch_cambridge(word)    â† æŠ“å–ç¿»è­¯         â”‚   â”‚     â”‚
â”‚  â”‚  â”‚  2. fetch_audio_url(word)    â† æŠ“å–éŸ³æª”URL      â”‚   â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                      â”‚
             â”‚ çˆ¬å–ç¿»è­¯              â”‚ çˆ¬å–éŸ³æª”
             â”‚                      â”‚
             â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cambridge (ä¸­è‹±ç‰ˆ)    â”‚  â”‚ Cambridge (è‹±æ–‡ç‰ˆ)        â”‚
â”‚ /english-chinese-     â”‚  â”‚ /english/hello           â”‚
â”‚  traditional/hello    â”‚  â”‚                          â”‚
â”‚                       â”‚  â”‚ <source type="audio/     â”‚
â”‚ <span class="trans">  â”‚  â”‚  mpeg" src="/us_pron/    â”‚
â”‚   è‹¦çš„</span>         â”‚  â”‚  .../hello.mp3">         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                         â”‚
            â”‚ è§£æç¿»è­¯                 â”‚ æå–éŸ³æª”URL
            â”‚                         â”‚
            â–¼                         â–¼
       ["è‹¦çš„", "æ€¨æ¨çš„", ...]    "https://.../us_pron/.../hello.mp3"
            â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼ è¿”å› JSON
            {
              "word": "hello",
              "translations": ["ä½ å¥½", "æ‚¨å¥½", ...],
              "audio_url": "https://.../hello.mp3"
            }
                      â”‚
                      â–¼
              å‰ç«¯æ¥æ”¶ä¸¦é¡¯ç¤ºç¿»è­¯
              å„²å­˜ audio_url å‚™ç”¨
```

## ğŸ¯ å„éƒ¨åˆ†åŠŸèƒ½èªªæ˜

### 1ï¸âƒ£ **index.html** - ç¶²é çµæ§‹

**ä½œç”¨**ï¼šå®šç¾©é é¢çš„ HTML éª¨æ¶

**ä¸»è¦å…ƒç´ **ï¼š
- ğŸ“– é é¢æ¨™é¡Œå’Œ logo
- ğŸ” æœå°‹è¼¸å…¥æ¡†
- ğŸ”Š ç™¼éŸ³æŒ‰éˆ•
- ğŸ“‹ ç¿»è­¯çµæœé¡¯ç¤ºå€åŸŸ
- â³ è¼‰å…¥å‹•ç•«
- âŒ éŒ¯èª¤è¨Šæ¯å€

**é—œéµä»£ç¢¼ç‰‡æ®µ**ï¼š
```html
<!-- æœå°‹æ¡† -->
<input type="text" id="searchInput" placeholder="è¼¸å…¥è‹±æ–‡å–®å­—...">
<button id="searchBtn">æœå°‹</button>

<!-- çµæœå€åŸŸ -->
<div id="resultContainer">
  <h2 id="wordTitle"></h2>
  <div id="translations"></div>
</div>
```

---

### 2ï¸âƒ£ **style.css** - è¦–è¦ºè¨­è¨ˆ

**ä½œç”¨**ï¼šå®šç¾©æ‰€æœ‰è¦–è¦ºæ¨£å¼å’Œå‹•ç•«

**è¨­è¨ˆç‰¹è‰²**ï¼š
- ğŸ¨ æ¥µç°¡é¢¨æ ¼é…è‰²
- ğŸŒˆ ç´«è‰²æ¼¸å±¤ä¸»é¡Œ
- âœ¨ æµæš¢çš„å‹•ç•«æ•ˆæœ
- ğŸ“± éŸ¿æ‡‰å¼ä½ˆå±€

**é—œéµæŠ€è¡“**ï¼š
```css
/* CSS è®Šæ•¸ */
:root {
  --color-primary: #4F46E5;
  --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

/* å‹•ç•« */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
```

---

### 3ï¸âƒ£ **app.js** - å‰ç«¯é‚è¼¯ï¼ˆæ ¸å¿ƒï¼ï¼‰

**ä½œç”¨**ï¼šè™•ç†ä½¿ç”¨è€…äº’å‹•ã€è³‡æ–™è«‹æ±‚å’Œé›™é‡å‚™æ´ç™¼éŸ³

**ä¸»è¦åŠŸèƒ½**ï¼š

#### A. æŸ¥è©¢å–®å­—ä¸¦å‘¼å«å¾Œç«¯ APIï¼ˆå«éŸ³æª”ï¼‰
```javascript
async function fetchTranslation(word) {
  // æ–¹æ³•1: å‘¼å«å¾Œç«¯ APIï¼ˆé‡é»ï¼ï¼‰
  const response = await fetch(
    `http://localhost:5000/api/translate?word=${word}`
  );
  const data = await response.json();
  
  // å„²å­˜éŸ³æª” URLï¼ˆæ–°å¢ï¼ï¼‰
  currentAudioUrl = data.audio_url || null;
  
  return data.translations;
  
  // æ–¹æ³•2: API å¤±æ•—æ™‚ä½¿ç”¨å…§å»ºå­—å…¸
  if (basicDict[word]) {
    currentAudioUrl = null;  // å…§å»ºå­—å…¸ç„¡éŸ³æª”
    return basicDict[word];
  }
}
```

#### B. é›™é‡å‚™æ´ç™¼éŸ³ç³»çµ±ï¼ˆæ–°å¢ï¼ï¼‰
```javascript
function pronounceWord() {
  // å„ªå…ˆï¼šä½¿ç”¨çœŸå¯¦ç¾å¼éŸ³æª”
  if (currentAudioUrl) {
    const audio = new Audio(currentAudioUrl);
    audio.onerror = () => speakWithWebAPI();  // å¤±æ•—æ™‚å‚™æ´
    audio.play().catch(() => speakWithWebAPI());
  } 
  // å‚™æ¡ˆï¼šä½¿ç”¨ Web Speech API
  else {
    speakWithWebAPI();
  }
}

function speakWithWebAPI() {
  const utterance = new SpeechSynthesisUtterance(currentWord);
  utterance.lang = 'en-US';
  window.speechSynthesis.speak(utterance);
}
```

#### C. é¡¯ç¤ºç¿»è­¯çµæœ
```javascript
function displayResult(word, translations) {
  translations.forEach(translation => {
    const span = document.createElement('span');
    span.textContent = translation;
    document.getElementById('translations').appendChild(span);
  });
}
```

---

### 4ï¸âƒ£ **server.py** - å¾Œç«¯ API æœå‹™å™¨ï¼ˆé—œéµï¼ï¼‰

**ä½œç”¨**ï¼šä½œç‚º CORS ä»£ç†ï¼ŒæŠ“å– Cambridge Dictionary ç¿»è­¯å’Œç¾å¼éŸ³æª”

#### ç‚ºä»€éº¼éœ€è¦å¾Œç«¯ï¼Ÿ

âŒ **å•é¡Œ**ï¼šå‰ç«¯ç›´æ¥è«‹æ±‚ Cambridge Dictionary æœƒè¢« CORS é˜»æ“‹

```javascript
// âŒ é€™æ¨£æœƒå¤±æ•—ï¼ˆCORS éŒ¯èª¤ï¼‰
fetch('https://dictionary.cambridge.org/...')
```

```
Error: Access to fetch at 'https://dictionary.cambridge.org/...' 
from origin 'file://' has been blocked by CORS policy
```

âœ… **è§£æ±ºæ–¹æ¡ˆ**ï¼šé€é Python å¾Œç«¯ä½œç‚ºä»£ç†

```
å‰ç«¯ â†’ å¾Œç«¯ (localhost:5000) â†’ Cambridge Dictionary
      âœ… åŒæºè«‹æ±‚              âœ… æœå‹™å™¨ç«¯è«‹æ±‚ï¼ˆç„¡ CORS é™åˆ¶ï¼‰
```

#### server.py ä¸»è¦åŠŸèƒ½

**1. æä¾› API ç«¯é»ï¼ˆå«éŸ³æª”ï¼‰**
```python
@app.route('/api/translate', methods=['GET'])
def translate():
    word = request.args.get('word')  # æ¥æ”¶å‰ç«¯å‚³ä¾†çš„å–®å­—
    translations = fetch_cambridge(word)  # æŠ“å–ç¿»è­¯
    audio_url = fetch_audio_url(word)    # æŠ“å–éŸ³æª”URLï¼ˆæ–°å¢ï¼ï¼‰
    
    return jsonify({
        'word': word,
        'translations': translations,
        'audio_url': audio_url  # è¿”å›éŸ³æª”URL
    })
```

**2. çˆ¬å– Cambridge Dictionary ç¿»è­¯**
```python
def fetch_cambridge(word):
    url = f'https://dictionary.cambridge.org/dictionary/english-chinese-traditional/{word}'
    response = requests.get(url)  # æœå‹™å™¨ç«¯è«‹æ±‚ï¼Œç„¡ CORS é™åˆ¶
    
    soup = BeautifulSoup(response.text, 'html.parser')
    
    # è§£æ HTMLï¼Œæå–ç¿»è­¯
    translations = []
    
    # æ–¹æ³•1: æŠ“å– <a class="Ref"><span>æ€¨æ¨çš„</span></a>
    ref_links = soup.find_all('a', class_='Ref')
    for link in ref_links:
        text = link.get_text(strip=True)
        if is_valid_translation(text):
            translations.append(text)
    
    # æ–¹æ³•2: æŠ“å– <span class="trans">è‹¦çš„</span>
    trans_spans = soup.find_all('span', class_='trans')
    for span in trans_spans:
        text = span.get_text(strip=True)
        if is_valid_translation(text):
            translations.append(text)
    
    # æ–¹æ³•3: æŠ“å– <span class="dtrans">æœ‰è‹¦å‘³çš„</span>
    dtrans_spans = soup.find_all('span', class_='dtrans')
    for span in dtrans_spans:
        text = span.get_text(strip=True)
        if is_valid_translation(text):
            translations.append(text)
    
    return translations
```

**3. éæ¿¾å’Œæ¸…ç†ç¿»è­¯**
```python
def is_valid_translation(text):
    # åªä¿ç•™ä¸­æ–‡
    if not re.search(r'[\u4e00-\u9fff]', text):
        return False
    
    # éæ¿¾ä¾‹å¥ï¼ˆå«å¥è™Ÿã€å•è™Ÿç­‰ï¼‰
    if re.search(r'[ã€‚ï¼Ÿï¼ï¼›]', text):
        return False
    
    # éæ¿¾éé•·æ–‡æœ¬ï¼ˆè¶…é 15 å­—ç¬¦ï¼‰
    if len(text) > 15:
        return False
    
    return True
```

**4. æŠ“å–ç¾å¼éŸ³æª” URLï¼ˆæ–°å¢ï¼ï¼‰**
```python
def fetch_audio_url(word):
    # è«‹æ±‚è‹±æ–‡ç‰ˆé é¢ï¼ˆæœ‰éŸ³æª”ï¼‰
    url = f'https://dictionary.cambridge.org/dictionary/english/{word}'
    response = requests.get(url)
    soup = BeautifulSoup(response.text, 'html.parser')
    
    # å°‹æ‰¾éŸ³æª” <source> æ¨™ç±¤
    audio_sources = soup.find_all('source', {'type': 'audio/mpeg'})
    
    # éæ¿¾ç¾å¼ç™¼éŸ³ï¼ˆ/us_pron/ï¼‰
    for source in audio_sources:
        src = source.get('src', '')
        if '/us_pron/' in src:  # åªè¦ç¾å¼ï¼Œä¸è¦è‹±å¼
            # è£œå…¨å®Œæ•´ URL
            if src.startswith('//'):
                return 'https:' + src
            elif src.startswith('/'):
                return 'https://dictionary.cambridge.org' + src
            return src
    
    return None  # æ‰¾ä¸åˆ°è¿”å› None
```

**5. è™•ç† CORS**
```python
from flask_cors import CORS

app = Flask(__name__)
CORS(app)  # å…è¨±å‰ç«¯è·¨åŸŸè«‹æ±‚
```

---

## ğŸ”„ å®Œæ•´è«‹æ±‚æµç¨‹

### ä»¥æŸ¥è©¢ "bitter" ç‚ºä¾‹

**æ­¥é©Ÿ 1**ï¼šä½¿ç”¨è€…åœ¨ `index.html` è¼¸å…¥ "bitter" ä¸¦æŒ‰ Enter

**æ­¥é©Ÿ 2**ï¼š`app.js` ç›£è½äº‹ä»¶ï¼Œå‘¼å« `handleSearch()`

**æ­¥é©Ÿ 3**ï¼š`app.js` ç™¼é€ fetch è«‹æ±‚åˆ°å¾Œç«¯
```javascript
fetch('http://localhost:5000/api/translate?word=bitter')
```

**æ­¥é©Ÿ 4**ï¼š`server.py` æ¥æ”¶è«‹æ±‚ï¼Œå‘¼å« `fetch_cambridge('bitter')`

**æ­¥é©Ÿ 5**ï¼š`server.py` å‘ Cambridge Dictionary ç™¼é€è«‹æ±‚
```python
requests.get('https://dictionary.cambridge.org/dictionary/english-chinese-traditional/bitter')
```

**æ­¥é©Ÿ 6**ï¼šCambridge è¿”å› HTML ç¶²é 

**æ­¥é©Ÿ 7**ï¼š`server.py` ä½¿ç”¨ BeautifulSoup è§£æ HTML
- æ‰¾åˆ° `<a class="Ref"><span>æ€¨æ¨çš„</span></a>` â†’ æå–ã€Œæ€¨æ¨çš„ã€
- æ‰¾åˆ° `<span class="trans">è‹¦çš„</span>` â†’ æå–ã€Œè‹¦çš„ã€
- æ‰¾åˆ° `<span class="dtrans">æœ‰è‹¦å‘³çš„</span>` â†’ æå–ã€Œæœ‰è‹¦å‘³çš„ã€
- éæ¿¾ä¾‹å¥ã€æ¸…ç†æ‹¬è™Ÿã€å»é‡

**æ­¥é©Ÿ 8**ï¼š`server.py` è¿”å› JSON çµ¦å‰ç«¯
```json
{
  "word": "bitter",
  "translations": ["æ€¨æ¨çš„", "ç„¡æ³•é‡‹æ‡·çš„", "è‹¦çš„", "æœ‰è‹¦å‘³çš„", ...]
}
```

**æ­¥é©Ÿ 9**ï¼š`app.js` æ¥æ”¶ JSONï¼Œå‘¼å« `displayResult()`

**æ­¥é©Ÿ 10**ï¼š`app.js` å°‡ç¿»è­¯é¡¯ç¤ºåœ¨ç¶²é ä¸Š
```javascript
translations.forEach(translation => {
  const span = document.createElement('span');
  span.className = 'translation-item';
  span.textContent = translation;  // "æ€¨æ¨çš„", "è‹¦çš„", ...
  element.appendChild(span);
});
```

**æ­¥é©Ÿ 11**ï¼šä½¿ç”¨è€…çœ‹åˆ°çµæœï¼ ğŸ‰

---

## ğŸ’¡ ç¸½çµ

### å‰ç«¯ (index.html + style.css + app.js)
- ğŸ“± **ä½¿ç”¨è€…ä»‹é¢**ï¼šé¡¯ç¤ºã€äº’å‹•ã€è¦–è¦ºæ•ˆæœ
- ğŸ¤ **ç™¼éŸ³åŠŸèƒ½**ï¼šä½¿ç”¨ Web Speech API
- ğŸ“¡ **API è«‹æ±‚**ï¼šå‘å¾Œç«¯è«‹æ±‚ç¿»è­¯è³‡æ–™

### å¾Œç«¯ (server.py)
- ğŸŒ‰ **CORS ä»£ç†**ï¼šçªç ´ç€è¦½å™¨è·¨åŸŸé™åˆ¶
- ğŸ•·ï¸ **ç¶²é çˆ¬èŸ²**ï¼šæŠ“å– Cambridge Dictionary å…§å®¹
- ğŸ” **HTML è§£æ**ï¼šæå–ç²¾æº–çš„ç¹é«”ä¸­æ–‡ç¿»è­¯
- ğŸ§¹ **è³‡æ–™æ¸…ç†**ï¼šéæ¿¾ä¾‹å¥ã€å»é‡ã€æ ¼å¼åŒ–

### ç‚ºä»€éº¼ä¸èƒ½åªç”¨å‰ç«¯ï¼Ÿ

å› ç‚º**ç€è¦½å™¨å®‰å…¨é™åˆ¶ï¼ˆCORSï¼‰**ï¼Œå‰ç«¯ç„¡æ³•ç›´æ¥è¨ªå•å…¶ä»–ç¶²ç«™çš„è³‡æ–™ã€‚å¿…é ˆé€éå¾Œç«¯æœå‹™å™¨ä½œç‚ºä¸­ä»‹ã€‚

é€™å°±æ˜¯ç‚ºä»€éº¼éœ€è¦å•Ÿå‹• `server.py` å¾Œç«¯æ‰èƒ½æŸ¥è©¢ä»»æ„å–®å­—ï¼ ğŸš€

---

## ğŸ¤ é›™é‡å‚™æ´ç™¼éŸ³ç³»çµ±

### ç³»çµ±æ¶æ§‹

```
ä½¿ç”¨è€…é»æ“Š ğŸ”Š
       â†“
æª¢æŸ¥ currentAudioUrl
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”
   â–¼       â–¼
 æœ‰URL   ç„¡URL
   â”‚       â”‚
   â–¼       â–¼
çœŸå¯¦éŸ³æª”  Web Speech
(å„ªå…ˆ)    (å‚™æ¡ˆ)
   â”‚       â”‚
   â–¼       â–¼
æ’­æ”¾æˆåŠŸï¼Ÿ
   â”‚
YESâ”€NO
 â”‚   â”‚
 âœ“   â–¼
    å›é€€åˆ°
   Web Speech
```

### ç‚ºä»€éº¼æ˜¯é›™é‡å‚™æ´ï¼Ÿ

| æ–¹æ¡ˆ | å„ªé» | ç¼ºé» | é©ç”¨å ´æ™¯ |
|------|------|------|---------|
| **çœŸå¯¦éŸ³æª”**<br>(Cambridge) | â­â­â­â­â­ éŸ³è³ª<br>â­â­â­â­â­ æº–ç¢º | éœ€ç¶²è·¯<br>ç´„30KBæµé‡ | æœ‰ç¶²è·¯æ™‚ |
| **Web Speech API**<br>(åˆæˆèªéŸ³) | â­â­â­â­â­ å¯é <br>é›¶æµé‡<br>å³æ™‚ç”Ÿæˆ | â­â­â­ éŸ³è³ª<br>åˆæˆæ„Ÿè¼ƒé‡ | é›¢ç·š/å‚™æ´ |

### æŠ€è¡“å¯¦ç¾é‡é»

#### 1. ç‹€æ…‹ç®¡ç†
```javascript
let currentAudioUrl = null;  // å„²å­˜éŸ³æª”URL
```

#### 2. API å›æ‡‰åŒ…å«éŸ³æª”
```json
{
  "word": "hello",
  "translations": ["ä½ å¥½", "æ‚¨å¥½"],
  "audio_url": "https://dictionary.cambridge.org/media/english/us_pron/.../hello.mp3"
}
```

#### 3. æ™ºæ…§ç™¼éŸ³é¸æ“‡
```javascript
if (currentAudioUrl) {
  // å„ªå…ˆï¼šçœŸå¯¦éŸ³æª”
  const audio = new Audio(currentAudioUrl);
  audio.onerror = () => speakWithWebAPI();  // å¤±æ•—è‡ªå‹•åˆ‡æ›
  audio.play();
} else {
  // å‚™æ¡ˆï¼šåˆæˆèªéŸ³
  speakWithWebAPI();
}
```

#### 4. ç‚ºä»€éº¼æŠ“å–è‹±æ–‡ç‰ˆè€Œéä¸­è‹±ç‰ˆï¼Ÿ

Cambridge Dictionary æœ‰å…©å€‹ç‰ˆæœ¬ï¼š
- **è‹±æ–‡ç‰ˆ** (`/dictionary/english/hello`) â†’ âœ… æœ‰éŸ³æª”
- **ä¸­è‹±ç‰ˆ** (`/dictionary/english-chinese-traditional/hello`) â†’ âŒ éŸ³æª”è¼ƒå°‘

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- ç¿»è­¯ï¼šå¾**ä¸­è‹±ç‰ˆ**æŠ“å–ï¼ˆç¢ºä¿ç¹é«”ä¸­æ–‡ï¼‰
- éŸ³æª”ï¼šå¾**è‹±æ–‡ç‰ˆ**æŠ“å–ï¼ˆç¢ºä¿æœ‰ç¾å¼ç™¼éŸ³ï¼‰

#### 5. ç¾å¼ vs è‹±å¼éŸ³æª”

```python
# éæ¿¾æ¢ä»¶ï¼šåªè¦ç¾å¼ç™¼éŸ³
if '/us_pron/' in src:  # âœ… ç¾å¼
    return src
# æ’é™¤è‹±å¼ç™¼éŸ³
if '/uk_pron/' in src:  # âŒ è‹±å¼ï¼Œè·³é
    continue
```

### ä½¿ç”¨é«”é©—æµç¨‹

**å ´æ™¯ 1: æŸ¥è©¢å¸¸è¦‹å–®å­—ï¼ˆæœ€ä½³ï¼‰**
```
æŸ¥è©¢ "hello" â†’ å¾Œç«¯è¿”å›éŸ³æª”URL â†’ æ’­æ”¾çœŸå¯¦ç¾å¼ç™¼éŸ³ âœ…
éŸ³è³ª: â­â­â­â­â­
```

**å ´æ™¯ 2: éŸ³æª”è¼‰å…¥å¤±æ•—ï¼ˆè‡ªå‹•å‚™æ´ï¼‰**
```
æŸ¥è©¢ "world" â†’ éŸ³æª”URLæœ‰æ•ˆ â†’ ç¶²è·¯å•é¡Œè¼‰å…¥å¤±æ•— â†’ è‡ªå‹•åˆ‡æ›åˆæˆèªéŸ³ âœ…
éŸ³è³ª: â­â­â­ï¼ˆä»å¯ä½¿ç”¨ï¼‰
```

**å ´æ™¯ 3: ä½¿ç”¨å…§å»ºå­—å…¸ï¼ˆåˆæˆèªéŸ³ï¼‰**
```
æŸ¥è©¢ "cat" â†’ å…§å»ºå­—å…¸ â†’ currentAudioUrl = null â†’ ç›´æ¥ä½¿ç”¨åˆæˆèªéŸ³ âœ…
éŸ³è³ª: â­â­â­
```

**å ´æ™¯ 4: Cambridge ç„¡éŸ³æª”ï¼ˆç½•è¦‹ï¼‰**
```
æŸ¥è©¢ç”Ÿåƒ»å–®å­— â†’ å¾Œç«¯æ‰¾ä¸åˆ°éŸ³æª” â†’ audio_url = null â†’ ä½¿ç”¨åˆæˆèªéŸ³ âœ…
éŸ³è³ª: â­â­â­
```

### ç¸½çµ

âœ¨ **æ°¸é æœ‰ç™¼éŸ³**ï¼šçœŸå¯¦éŸ³æª”å¤±æ•—æ™‚è‡ªå‹•å›é€€<br>
âš¡ **æœ€ä½³é«”é©—**ï¼šå„ªå…ˆä½¿ç”¨å°ˆæ¥­éŒ„éŸ³<br>
ğŸ›¡ï¸ **å¯é ç©©å®š**ï¼šé›™å±¤ä¿è­·æ©Ÿåˆ¶<br>
ğŸ¯ **ç¾å¼è‹±èª**ï¼šå°ˆæ³¨æ–¼ç¾å¼ç™¼éŸ³ï¼ˆUSï¼‰

é€™å°±æ˜¯ç‚ºä»€éº¼æ‚¨çš„å­—å…¸ç™¼éŸ³æ°¸é ä¸æœƒå¤±æ•—ï¼ ğŸš€
